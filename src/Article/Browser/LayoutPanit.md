---
title: HTML渲染之重绘重排
nav:
  title: 基础沉淀
  path: /article
group:
  path: /browser
  title: 浏览器
  order: 2
order: 3
---

# HTML 渲染之重绘重排

## 什么是重绘重排

### 回流

渲染对象在创建完成并添加到渲染树时，只是将 DOM 节点和它对应的样式结合起来，并不包含位置和大小信息。所以还需要 `layout` 这一过程计算他们的位置和大小，这一过程称为回流。

**触发条件**：

回流这一阶段主要是计算节点的位置和几何信息，那么当页面布局和几何信息发生变化的时候，就需要回流。

- 一个 DOM 元素的几何属性变化，常见的几何属性有 width、height、padding、margin、left、top、border 等等。
- 使 DOM 节点发生增减或者移动。
- 读写 offset 家族、scroll 家族和 client 家族属性的时候，浏览器为了获取这些值，需要进行回流操作。
- 调用 window.getComputedStyle 方法。

### 重绘

通过构造渲染树和回流阶段，知道了哪些节点是可见的，以及可见节点的样式和具体的几何信息(位置、大小)，那么我们就可以将渲染树的每个节点都转换为屏幕上的实际像素，这个过程就叫做重绘。在重绘阶段，系统会遍历渲染树，并调用渲染对象的 `paint` 方法，将渲染对象的内容显示在屏幕上。

**触发条件**：

重绘是一个元素外观的改变所触发的浏览器行为，例如改变 `visibility`、`outline`、`background-color` 等属性，这些属性只是影响元素的外观，风格，并且没有影响几何属性的时候，会导致`重绘repaint`
