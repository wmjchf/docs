---
title: 初探函数式编程
nav:
  title: 优秀文章
  path: /article
group:
  path: /fp
  title: 函数式编程
  order: 6
order: 1
---

# 初探函数式编程

近些年，函数式以其优雅，简单的特点开始重新风靡整个编程界。

## 什么是函数式编程

在我们的编程世界中，我们需要处理的其实也只有“数据”和“关系”，而关系就是函数。我们所谓的编程工作也不过就是在找一种映射关系，一旦关系找到了，问题就解决了，剩下的事情，就是让数据流过这种关系，然后转换成另一个数据罢了。

`函数式编程（FP）`就是把计算过程抽象成`函数`,`函数`是一种描述集合和集合之间的转换关系，输入通过函数都会返回有且只有一个输出值。所以，`函数`实际上是一个关系，或者说是一种映射，而这种映射关系是可以组合的，一旦我们知道一个函数的输出类型可以匹配另一个函数的输入，那他们就可以进行组合，把输入当做原料，把输出当做产品，数据可以不断的从一个函数的输出可以流入另一个函数输入，最后再输出结果。

所以，`函数式编程`强调在编程过程中把更多的关注点放在如何去构建关系。

## 函数式编程的特点

### 函数是一等公民

这是函数式编程得以实现的前提，因为我们基本的操作都是在操作函数。这个特性意味着函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数，传入另一个函数，或者作为别的函数的返回值。

```js
const convert = () => {}; // 将函数赋值给变量

const convertFn = (fn) => {};
convertFn(() => {}); // 将函数作为参数传入

const convertReturn = () => {
  return () => {};
}; // 将函数作为返回值
```

### 声明式编程

函数式编程大多时候都是在声明我需要做什么，而非怎么去做。这种编程风格称为 声明式编程 。这样有个好处是代码的可读性特别高，因为声明式代码大多都是接近自然语言的，同时，它解放了大量的人力，因为它不关心具体的实现，因此它可以把优化能力交给具体的实现，这也方便我们进行分工协作。

### 纯函数

纯函数的概念就两点：

- 不依赖外部状态（无状态): 函数的的运行结果不依赖全局变量，this 指针，IO 操作等。
- 没有副作用（数据不变): 不修改全局变量，不修改入参。

所以纯函数才是真正意义上的 “函数”， 它意味着相同的输入，永远会得到相同的输出。

纯函数的意义是什么？

- **便于测试和优化**：这个意义在实际项目开发中意义非常大，由于纯函数对于相同的输入永远会返回相同的结果，因此我们可以轻松断言函数的执行结果，同时也可以保证函数的优化不会影响其他代码的执行。这十分符合测试驱动开发 TDD（Test-Driven Development ) 的思想，这样产生的代码往往健壮性更强。

- **可缓存性**：因为相同的输入总是可以返回相同的输出，因此，我们可以提前缓存函数的执行结果，有很多库有所谓的 memoize 函数，下面以一个简化版的 memoize 为例，这个函数就能缓存函数的结果，对于像 fibonacci 这种计算，就可以起到很好的缓存效果。

- **自文档化**：由于纯函数没有副作用，所以其依赖很明确，因此更易于观察和理解（配合后面介绍的 [类型签名](#hindly-milner 类型签名）更佳)。

- **更少的 Bug**：使用纯函数意味着你的函数中不存在指向不明的 this，不存在对全局变量的引用，不存在对参数的修改，这些共享状态往往是绝大多数 bug 的源头。
